---
id: totp-cli
title: Configuration in Ory CLI
---

Follow these steps to enable Time-Based One-Time Password (TOTP) as the second
authentication factor: 

1. Get the Identity Service configuration from your project 
and save it to a file: 

  ```shell
  ## List all available projects
  ory list projects

  ## Get config
  ory get identity-config <project-id> --format yaml > identity-config.yaml
  ```

2. Find `totp` in `selfservice/methods`, set `enabled` to `true`, and define the
`issuer`:

  ```yaml
  selfservice:
    methods:
      totp:
        // highlight-start
        config:
          # The "issuer" is the name in the TOTP application users see when getting a one-time password.
          issuer: ExampleIssuer.com
        enabled: true
        // highlight-end
  ```

3. Update the Ory Cloud Identity Service configuration using the file you worked
   with:

  ```shell
  ory update identity-config <project-id> --file updated_config.yaml
  ```

## Writing E2E Tests

When writing end-to-end (E2E) tests for TOTP implementation in your app, 
[you can reference the Cypress tests used in Ory Identity Service (Kratos)](https://github.com/ory/kratos/blob/fc2cecfbeab811aa1a851f953b6bc2a4c119c412/test/e2e/cypress/integration/profiles/mfa/totp.spec.ts).